[global]
log-path={{.LogPath}}
spool-path={{.SpoolPath}}
lock-path={{.LockPath}}
archive-async=n
archive-copy=y
compress-type=zst
expire-auto=n
link-all=y
log-level-console=info
log-level-file=detail
log-subprocess=y
resume=n
start-fast=y
process-max=8

tls-server-cert-file={{.ServerCertFile}}
tls-server-key-file={{.ServerKeyFile}}
tls-server-ca-file={{.ServerCAFile}}
tls-server-address=0.0.0.0
tls-server-port={{.ServerPort}}
{{- range .ServerAuths}}
tls-server-auth={{.}}
{{- end}}

{{- if .RepoCredentials}}
{{- range $key, $value := .RepoCredentials}}
{{$key}}={{$value}}
{{- end}}
{{- end}}

[multigres]
{{range $key, $value := .RepoConfig}}{{$key}}={{$value}}
{{end}}
pg1-socket-path={{.Pg1SocketPath}}
pg1-port={{.Pg1Port}}
pg1-path={{.Pg1Path}}
pg1-user=postgres
pg1-database=postgres

{{- if .Pg2Host}}
pg2-host={{.Pg2Host}}
pg2-port={{.Pg2Port}}
pg2-path={{.Pg2Path}}
pg2-user=postgres
pg2-database=postgres
pg2-host-type=tls
pg2-host-port={{.Pg2HostPort}}
pg2-host-ca-file={{.Pg2HostCAFile}}
pg2-host-cert-file={{.Pg2HostCertFile}}
pg2-host-key-file={{.Pg2HostKeyFile}}
{{- end}}
